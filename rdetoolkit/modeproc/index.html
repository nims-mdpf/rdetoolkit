
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../invoicefile/" rel="prev"/>
<link href="../validation/" rel="next"/>
<link href="../../img/2585322.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.5.38" name="generator"/>
<title>Mode Processing Module - RDEToolKit Documentation</title>
<link href="../../assets/stylesheets/main.8c3ca2c6.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Noto Sans JP";--md-code-font:"Roboto Mono"}</style>
<link href="../../assets/_mkdocstrings.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#mode-processing-module">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="RDEToolKit Documentation" class="md-header__button md-logo" data-md-component="logo" href="../.." title="RDEToolKit Documentation">
<img alt="logo" src="../../img/2585322.png"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            RDEToolKit Documentation
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Mode Processing Module
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/nims-dpfc/rdetoolkit" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    nims-dpfc/rdetoolkit
  </div>
</a>
</div>
</nav>
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../..">
          
  
  Getting started

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../install/">
          
  
  Installation

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../usage/quickstart/">
          
  
  User Guide

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../">
          
  
  API Documentation

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../contribute/home/">
          
  
  Development

        </a>
</li>
</ul>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="RDEToolKit Documentation" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="RDEToolKit Documentation">
<img alt="logo" src="../../img/2585322.png"/>
</a>
    RDEToolKit Documentation
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/nims-dpfc/rdetoolkit" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    nims-dpfc/rdetoolkit
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
<span class="md-ellipsis">
    Getting started
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_1_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_1">
<span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    RDEToolKit
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
<span class="md-ellipsis">
    Installation
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Installation
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../install/">
<span class="md-ellipsis">
    インストール方法
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
<span class="md-ellipsis">
    User Guide
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_3">
<span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
<span class="md-ellipsis">
    Quick Start
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_1_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_1">
<span class="md-nav__icon md-icon"></span>
            Quick Start
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/quickstart/">
<span class="md-ellipsis">
    クイックスタート
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
<span class="md-ellipsis">
    構造化処理
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_2">
<span class="md-nav__icon md-icon"></span>
            構造化処理
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/structured_process/structured/">
<span class="md-ellipsis">
    構造化処理を構築する
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/structured_process/directory/">
<span class="md-ellipsis">
    サポートするディレクトリ
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/structured_process/rdepath/">
<span class="md-ellipsis">
    構造化ディレクトリパスの取得
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/structured_process/errorhandling/">
<span class="md-ellipsis">
    構造化処理のエラーハンドリング
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/structured_process/feature_description/">
<span class="md-ellipsis">
    データタイル説明欄への自動記述について
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
<span class="md-ellipsis">
    コマンドライン機能
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_3">
<span class="md-nav__icon md-icon"></span>
            コマンドライン機能
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/cli/">
<span class="md-ellipsis">
    コマンドライン機能について
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
<span class="md-ellipsis">
    設定ファイル
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_4">
<span class="md-nav__icon md-icon"></span>
            設定ファイル
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/config/config/">
<span class="md-ellipsis">
    RDEToolKit設定ファイル
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/config/mode/">
<span class="md-ellipsis">
    RDEToolKitのデータ登録モード
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/config/file_folder_mode/">
<span class="md-ellipsis">
    圧縮ファイルの形式について
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/config/magic_variable/">
<span class="md-ellipsis">
    Magic Variableによるデータ登録について
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
<span class="md-ellipsis">
    テンプレートファイル
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_5">
<span class="md-nav__icon md-icon"></span>
            テンプレートファイル
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/metadata_definition_file/">
<span class="md-ellipsis">
    テンプレートファイル
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
<span class="md-ellipsis">
    バリデーション
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_6">
<span class="md-nav__icon md-icon"></span>
            バリデーション
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/validation/">
<span class="md-ellipsis">
    バリデーション機能
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
<span class="md-ellipsis">
    オブジェクトストレージを使用する
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_7_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_7">
<span class="md-nav__icon md-icon"></span>
            オブジェクトストレージを使用する
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/object_storage/">
<span class="md-ellipsis">
    rdetolkitでオブジェクトストレージ(MinIO)を利用する方法
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_3_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
<span class="md-ellipsis">
    Docker
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_3_8_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_3_8">
<span class="md-nav__icon md-icon"></span>
            Docker
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../usage/docker/">
<span class="md-ellipsis">
    Using RDEToolKit with Docker
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
<span class="md-ellipsis">
    API Documentation
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_4_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_4">
<span class="md-nav__icon md-icon"></span>
            API Documentation
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../">
<span class="md-ellipsis">
    RDE Toolkit API Documentation
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
<span class="md-ellipsis">
    impl
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_2">
<span class="md-nav__icon md-icon"></span>
            impl
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../impl/compressed_controller/">
<span class="md-ellipsis">
    Compressed Controller Module
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../impl/input_controller/">
<span class="md-ellipsis">
    Input Controller Module
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
<span class="md-ellipsis">
    interface
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_3">
<span class="md-nav__icon md-icon"></span>
            interface
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../interface/filechecker/">
<span class="md-ellipsis">
    File Checker Interfaces Module
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
<span class="md-ellipsis">
    models
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_4">
<span class="md-nav__icon md-icon"></span>
            models
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../models/invoice_schema/">
<span class="md-ellipsis">
    Invoice Schema Module
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../models/metadata/">
<span class="md-ellipsis">
    Metadata Module
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../models/rde2types/">
<span class="md-ellipsis">
    RDE2 Types Module
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
<span class="md-ellipsis">
    storage
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_5">
<span class="md-nav__icon md-icon"></span>
            storage
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../storage/minio/">
<span class="md-ellipsis">
    MinIO Storage
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_4_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
<span class="md-ellipsis">
    core module
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_4_6_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_4_6">
<span class="md-nav__icon md-icon"></span>
            core module
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../core/">
<span class="md-ellipsis">
    Core Module
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../config/">
<span class="md-ellipsis">
    Configuration Module
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../workflows/">
<span class="md-ellipsis">
    Workflows Module
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../rde2util/">
<span class="md-ellipsis">
    rde2util Module
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../invoicefile/">
<span class="md-ellipsis">
    Invoice File Module
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Mode Processing Module
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Mode Processing Module
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview">
<span class="md-ellipsis">
      Overview
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#type-definitions">
<span class="md-ellipsis">
      Type Definitions
    </span>
</a>
<nav aria-label="Type Definitions" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_callbacktype">
<span class="md-ellipsis">
      _CallbackType
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#functions">
<span class="md-ellipsis">
      Functions
    </span>
</a>
<nav aria-label="Functions" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#invoice_mode_process">
<span class="md-ellipsis">
      invoice_mode_process
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#excel_invoice_mode_process">
<span class="md-ellipsis">
      excel_invoice_mode_process
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#smarttable_invoice_mode_process">
<span class="md-ellipsis">
      smarttable_invoice_mode_process
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rdeformat_mode_process">
<span class="md-ellipsis">
      rdeformat_mode_process
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#multifile_mode_process">
<span class="md-ellipsis">
      multifile_mode_process
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#copy_input_to_rawfile">
<span class="md-ellipsis">
      copy_input_to_rawfile
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#copy_input_to_rawfile_for_rdeformat">
<span class="md-ellipsis">
      copy_input_to_rawfile_for_rdeformat
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#selected_input_checker">
<span class="md-ellipsis">
      selected_input_checker
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#workflowexecutionstatus">
<span class="md-ellipsis">
      WorkflowExecutionStatus
    </span>
</a>
<nav aria-label="WorkflowExecutionStatus" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#attributes">
<span class="md-ellipsis">
      Attributes
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-status-handling">
<span class="md-ellipsis">
      Example Status Handling
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error-handling">
<span class="md-ellipsis">
      Error Handling
    </span>
</a>
<nav aria-label="Error Handling" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#exception-types">
<span class="md-ellipsis">
      Exception Types
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#best-practices">
<span class="md-ellipsis">
      Best Practices
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#integration-examples">
<span class="md-ellipsis">
      Integration Examples
    </span>
</a>
<nav aria-label="Integration Examples" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#complete-processing-workflow">
<span class="md-ellipsis">
      Complete Processing Workflow
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#performance-considerations">
<span class="md-ellipsis">
      Performance Considerations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#see-also">
<span class="md-ellipsis">
      See Also
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../validation/">
<span class="md-ellipsis">
    Validation Module
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../img2thumb/">
<span class="md-ellipsis">
    Image to Thumbnail Module
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../rdelogger/">
<span class="md-ellipsis">
    RDE Logger Module
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../exceptions/">
<span class="md-ellipsis">
    Exceptions Module
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    Development
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            Development
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../contribute/home/">
<span class="md-ellipsis">
    Top
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../contribute/documents_contributing/">
<span class="md-ellipsis">
    Documents
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../contribute/sourcecode_contributing/">
<span class="md-ellipsis">
    Source Code
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#overview">
<span class="md-ellipsis">
      Overview
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#type-definitions">
<span class="md-ellipsis">
      Type Definitions
    </span>
</a>
<nav aria-label="Type Definitions" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#_callbacktype">
<span class="md-ellipsis">
      _CallbackType
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#functions">
<span class="md-ellipsis">
      Functions
    </span>
</a>
<nav aria-label="Functions" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#invoice_mode_process">
<span class="md-ellipsis">
      invoice_mode_process
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#excel_invoice_mode_process">
<span class="md-ellipsis">
      excel_invoice_mode_process
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#smarttable_invoice_mode_process">
<span class="md-ellipsis">
      smarttable_invoice_mode_process
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#rdeformat_mode_process">
<span class="md-ellipsis">
      rdeformat_mode_process
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#multifile_mode_process">
<span class="md-ellipsis">
      multifile_mode_process
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#copy_input_to_rawfile">
<span class="md-ellipsis">
      copy_input_to_rawfile
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#copy_input_to_rawfile_for_rdeformat">
<span class="md-ellipsis">
      copy_input_to_rawfile_for_rdeformat
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#selected_input_checker">
<span class="md-ellipsis">
      selected_input_checker
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#workflowexecutionstatus">
<span class="md-ellipsis">
      WorkflowExecutionStatus
    </span>
</a>
<nav aria-label="WorkflowExecutionStatus" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#attributes">
<span class="md-ellipsis">
      Attributes
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#example-status-handling">
<span class="md-ellipsis">
      Example Status Handling
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#error-handling">
<span class="md-ellipsis">
      Error Handling
    </span>
</a>
<nav aria-label="Error Handling" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#exception-types">
<span class="md-ellipsis">
      Exception Types
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#best-practices">
<span class="md-ellipsis">
      Best Practices
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#integration-examples">
<span class="md-ellipsis">
      Integration Examples
    </span>
</a>
<nav aria-label="Integration Examples" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#complete-processing-workflow">
<span class="md-ellipsis">
      Complete Processing Workflow
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#performance-considerations">
<span class="md-ellipsis">
      Performance Considerations
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#see-also">
<span class="md-ellipsis">
      See Also
    </span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="mode-processing-module">Mode Processing Module</h1>
<p>The <code>rdetoolkit.modeproc</code> module provides specialized processing functions for different input modes in the RDE (Research Data Exchange) structuring pipeline. This module implements the core processing logic for various data input patterns and formats.</p>
<h2 id="overview">Overview</h2>
<p>The modeproc module handles different types of data processing modes, each tailored to specific input patterns and requirements:</p>
<ul>
<li><strong>Invoice Mode</strong>: Standard invoice-based data processing</li>
<li><strong>Excel Invoice Mode</strong>: Processing with Excel-based invoice files</li>
<li><strong>SmartTable Mode</strong>: Advanced table-based processing with automated invoice generation</li>
<li><strong>RDE Format Mode</strong>: Processing using RDE format specifications</li>
<li><strong>Multi-File Mode</strong>: Handling multiple data files in parallel</li>
<li><strong>Input File Classification</strong>: Automatic detection and routing to appropriate processors</li>
</ul>
<h2 id="type-definitions">Type Definitions</h2>
<h3 id="_callbacktype">_CallbackType</h3>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code>_CallbackType <span style="color: #333333">=</span> Callable[[RdeInputDirPaths, RdeOutputResourcePath], <span style="color: #008800; font-weight: bold">None</span>]
</code></pre></div></td></tr></table></div>
<p>A type alias for custom dataset processing functions that accept input paths and output resource paths.</p>
<h2 id="functions">Functions</h2>
<h3 id="invoice_mode_process">invoice_mode_process</h3>
<p>Process invoice-related data with standard RDE pipeline operations.</p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">6</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">invoice_mode_process</span>(
    index: <span style="color: #007020">str</span>,
    srcpaths: RdeInputDirPaths,
    resource_paths: RdeOutputResourcePath,
    datasets_process_function: _CallbackType <span style="color: #333333">|</span> <span style="color: #008800; font-weight: bold">None</span> <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">None</span>,
) <span style="color: #333333">-&gt;</span> WorkflowExecutionStatus
</code></pre></div></td></tr></table></div>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>index</code> (str): Unique workflow execution identifier (run_id)</li>
<li><code>srcpaths</code> (RdeInputDirPaths): Input directory paths for source data</li>
<li><code>resource_paths</code> (RdeOutputResourcePath): Output resource paths for processed data</li>
<li><code>datasets_process_function</code> (_CallbackType | None): Optional custom dataset processing function</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>WorkflowExecutionStatus</code>: Execution status containing run details, success/failure status, and error information</li>
</ul>
<p><strong>Processing Steps:</strong></p>
<ol>
<li>Copy input files to raw file directory</li>
<li>Execute custom dataset processing function (if provided)</li>
<li>Copy images to thumbnail directory</li>
<li>Replace <code>${filename}</code> placeholders in invoice with actual filenames</li>
<li>Update descriptions with features (errors ignored)</li>
<li>Validate metadata-def.json file</li>
<li>Validate invoice file against invoice schema</li>
</ol>
<p><strong>Raises:</strong></p>
<ul>
<li>Propagates exceptions from <code>datasets_process_function</code></li>
<li>Validation errors during metadata or invoice validation</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 7</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 8</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 9</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">10</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">11</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">12</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">13</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">14</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">15</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">16</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">17</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">18</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">19</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">20</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">21</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">22</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">23</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">24</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">25</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">26</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">27</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">28</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">29</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">30</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">31</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">32</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">33</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">34</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">35</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">36</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">37</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">38</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">39</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit.modeproc</span> <span style="color: #008800; font-weight: bold">import</span> invoice_mode_process
<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit.models.rde2types</span> <span style="color: #008800; font-weight: bold">import</span> RdeInputDirPaths, RdeOutputResourcePath
<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">pathlib</span> <span style="color: #008800; font-weight: bold">import</span> Path

<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">custom_invoice_processor</span>(srcpaths: RdeInputDirPaths, resource_paths: RdeOutputResourcePath) <span style="color: #333333">-&gt;</span> <span style="color: #008800; font-weight: bold">None</span>:
<span style="color: #bbbbbb">    </span><span style="color: #DD4422">"""Custom processing for invoice data."""</span>
    <span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Processing </span><span style="background-color: #eeeeee">{</span><span style="color: #007020">len</span>(resource_paths<span style="color: #333333">.</span>rawfiles)<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0"> files"</span>)

    <span style="color: #888888"># Custom invoice processing logic</span>
    <span style="color: #008800; font-weight: bold">for</span> raw_file <span style="color: #000000; font-weight: bold">in</span> resource_paths<span style="color: #333333">.</span>rawfiles:
        <span style="color: #008800; font-weight: bold">if</span> raw_file<span style="color: #333333">.</span>suffix <span style="color: #333333">==</span> <span style="background-color: #fff0f0">'.csv'</span>:
            <span style="color: #888888"># Process CSV files</span>
            processed_path <span style="color: #333333">=</span> resource_paths<span style="color: #333333">.</span>struct <span style="color: #333333">/</span> <span style="background-color: #fff0f0">f"processed_</span><span style="background-color: #eeeeee">{</span>raw_file<span style="color: #333333">.</span>name<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>
            <span style="color: #888888"># ... processing logic</span>

<span style="color: #888888"># Setup paths</span>
srcpaths <span style="color: #333333">=</span> RdeInputDirPaths(
    inputdata<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/inputdata"</span>),
    invoice<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/invoice"</span>),
    tasksupport<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/tasksupport"</span>)
)

resource_paths <span style="color: #333333">=</span> RdeOutputResourcePath(
    raw<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/raw"</span>),
    rawfiles<span style="color: #333333">=</span>(Path(<span style="background-color: #fff0f0">"data/inputdata/invoice.csv"</span>),),
    struct<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/structured"</span>),
    <span style="color: #888888"># ... other paths</span>
)

<span style="color: #888888"># Execute invoice mode processing</span>
status <span style="color: #333333">=</span> invoice_mode_process(
    index<span style="color: #333333">=</span><span style="background-color: #fff0f0">"001"</span>,
    srcpaths<span style="color: #333333">=</span>srcpaths,
    resource_paths<span style="color: #333333">=</span>resource_paths,
    datasets_process_function<span style="color: #333333">=</span>custom_invoice_processor
)

<span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Status: </span><span style="background-color: #eeeeee">{</span>status<span style="color: #333333">.</span>status<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)
<span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Mode: </span><span style="background-color: #eeeeee">{</span>status<span style="color: #333333">.</span>mode<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)
</code></pre></div></td></tr></table></div>
<h3 id="excel_invoice_mode_process">excel_invoice_mode_process</h3>
<p>Process data using Excel-based invoice files with enhanced metadata handling.</p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">7</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">excel_invoice_mode_process</span>(
    srcpaths: RdeInputDirPaths,
    resource_paths: RdeOutputResourcePath,
    excel_invoice_file: Path,
    idx: <span style="color: #007020">int</span>,
    datasets_process_function: _CallbackType <span style="color: #333333">|</span> <span style="color: #008800; font-weight: bold">None</span> <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">None</span>,
) <span style="color: #333333">-&gt;</span> WorkflowExecutionStatus
</code></pre></div></td></tr></table></div>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>srcpaths</code> (RdeInputDirPaths): Input directory paths for source data</li>
<li><code>resource_paths</code> (RdeOutputResourcePath): Output resource paths for processed data</li>
<li><code>excel_invoice_file</code> (Path): Path to the Excel invoice file</li>
<li><code>idx</code> (int): Index identifier for the data being processed</li>
<li><code>datasets_process_function</code> (_CallbackType | None): Optional custom dataset processing function</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>WorkflowExecutionStatus</code>: Detailed execution status information</li>
</ul>
<p><strong>Processing Steps:</strong></p>
<ol>
<li>Overwrite Excel invoice file with processed data</li>
<li>Copy input files to raw file directory</li>
<li>Execute custom dataset processing function (if provided)</li>
<li>Replace <code>${filename}</code> placeholders in invoice</li>
<li>Copy images to thumbnail directory</li>
<li>Update descriptions with features (errors ignored)</li>
<li>Validate metadata-def.json file</li>
<li>Validate invoice file against schema</li>
</ol>
<p><strong>Raises:</strong></p>
<ul>
<li><code>StructuredError</code>: Issues with Excel invoice processing or validation</li>
<li>Propagates exceptions from custom processing functions</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 7</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 8</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 9</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">10</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">11</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">12</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">13</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">14</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">15</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">16</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">17</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">18</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">19</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">20</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">21</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">22</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">23</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">24</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">25</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">26</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">27</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit.modeproc</span> <span style="color: #008800; font-weight: bold">import</span> excel_invoice_mode_process
<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">pathlib</span> <span style="color: #008800; font-weight: bold">import</span> Path

<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">excel_data_processor</span>(srcpaths: RdeInputDirPaths, resource_paths: RdeOutputResourcePath) <span style="color: #333333">-&gt;</span> <span style="color: #008800; font-weight: bold">None</span>:
<span style="color: #bbbbbb">    </span><span style="color: #DD4422">"""Process data with Excel invoice context."""</span>

    <span style="color: #888888"># Access Excel-specific processing</span>
    <span style="color: #008800; font-weight: bold">for</span> raw_file <span style="color: #000000; font-weight: bold">in</span> resource_paths<span style="color: #333333">.</span>rawfiles:
        <span style="color: #008800; font-weight: bold">if</span> raw_file<span style="color: #333333">.</span>suffix <span style="color: #000000; font-weight: bold">in</span> [<span style="background-color: #fff0f0">'.xlsx'</span>, <span style="background-color: #fff0f0">'.xls'</span>]:
            <span style="color: #888888"># Excel-specific processing</span>
            excel_data <span style="color: #333333">=</span> pd<span style="color: #333333">.</span>read_excel(raw_file)
            <span style="color: #888888"># Process Excel data...</span>

        <span style="color: #008800; font-weight: bold">elif</span> raw_file<span style="color: #333333">.</span>suffix <span style="color: #333333">==</span> <span style="background-color: #fff0f0">'.csv'</span>:
            <span style="color: #888888"># CSV processing in Excel context</span>
            csv_data <span style="color: #333333">=</span> pd<span style="color: #333333">.</span>read_csv(raw_file)
            <span style="color: #888888"># Process CSV data...</span>

<span style="color: #888888"># Execute Excel invoice processing</span>
excel_file <span style="color: #333333">=</span> Path(<span style="background-color: #fff0f0">"data/inputdata/dataset_excel_invoice.xlsx"</span>)
status <span style="color: #333333">=</span> excel_invoice_mode_process(
    srcpaths<span style="color: #333333">=</span>srcpaths,
    resource_paths<span style="color: #333333">=</span>resource_paths,
    excel_invoice_file<span style="color: #333333">=</span>excel_file,
    idx<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">0</span>,
    datasets_process_function<span style="color: #333333">=</span>excel_data_processor
)
</code></pre></div></td></tr></table></div>
<h3 id="smarttable_invoice_mode_process">smarttable_invoice_mode_process</h3>
<p>Process SmartTable files to generate automated invoice data with intelligent table parsing.</p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">7</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">smarttable_invoice_mode_process</span>(
    index: <span style="color: #007020">str</span>,
    srcpaths: RdeInputDirPaths,
    resource_paths: RdeOutputResourcePath,
    smarttable_file: Path,
    datasets_process_function: _CallbackType <span style="color: #333333">|</span> <span style="color: #008800; font-weight: bold">None</span> <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">None</span>,
) <span style="color: #333333">-&gt;</span> WorkflowExecutionStatus
</code></pre></div></td></tr></table></div>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>index</code> (str): Unique workflow execution identifier</li>
<li><code>srcpaths</code> (RdeInputDirPaths): Input directory paths</li>
<li><code>resource_paths</code> (RdeOutputResourcePath): Output resource paths</li>
<li><code>smarttable_file</code> (Path): Path to SmartTable file (.xlsx, .csv, .tsv)</li>
<li><code>datasets_process_function</code> (_CallbackType | None): Optional custom processing function</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>WorkflowExecutionStatus</code>: Execution status with SmartTable-specific details</li>
</ul>
<p><strong>Processing Steps:</strong></p>
<ol>
<li>Initialize invoice from SmartTable file data</li>
<li>Copy input files to raw file directory</li>
<li>Execute custom dataset processing function (if provided)</li>
<li>Copy images to thumbnail directory</li>
<li>Replace filename placeholders in invoice</li>
<li>Update descriptions with features (errors ignored)</li>
<li>Validate metadata-def.json file</li>
<li>Validate invoice file against schema</li>
</ol>
<p><strong>Raises:</strong></p>
<ul>
<li><code>StructuredError</code>: SmartTable processing or validation errors</li>
<li>Propagates exceptions from custom processing functions</li>
</ul>
<p><strong>Supported SmartTable Formats:</strong></p>
<ul>
<li>Excel files (.xlsx, .xls)</li>
<li>CSV files (.csv)</li>
<li>TSV files (.tsv)</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 7</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 8</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 9</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">10</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">11</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">12</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">13</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">14</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">15</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">16</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">17</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">18</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">19</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">20</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">21</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">22</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">23</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">24</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">25</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">26</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">27</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">28</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">29</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">30</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">31</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">32</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">33</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">34</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">35</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit.modeproc</span> <span style="color: #008800; font-weight: bold">import</span> smarttable_invoice_mode_process
<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">pathlib</span> <span style="color: #008800; font-weight: bold">import</span> Path
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">pandas</span> <span style="color: #008800; font-weight: bold">as</span> <span style="color: #0e84b5; font-weight: bold">pd</span>

<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">smarttable_processor</span>(srcpaths: RdeInputDirPaths, resource_paths: RdeOutputResourcePath) <span style="color: #333333">-&gt;</span> <span style="color: #008800; font-weight: bold">None</span>:
<span style="color: #bbbbbb">    </span><span style="color: #DD4422">"""Custom processing for SmartTable data."""</span>

    <span style="color: #888888"># SmartTable files are automatically processed for invoice generation</span>
    <span style="color: #888888"># Custom processing can focus on data transformation</span>

    <span style="color: #008800; font-weight: bold">for</span> raw_file <span style="color: #000000; font-weight: bold">in</span> resource_paths<span style="color: #333333">.</span>rawfiles:
        <span style="color: #008800; font-weight: bold">if</span> raw_file<span style="color: #333333">.</span>suffix <span style="color: #333333">==</span> <span style="background-color: #fff0f0">'.csv'</span>:
            <span style="color: #888888"># Enhanced CSV processing with SmartTable context</span>
            df <span style="color: #333333">=</span> pd<span style="color: #333333">.</span>read_csv(raw_file)

            <span style="color: #888888"># Apply SmartTable-aware transformations</span>
            enhanced_df <span style="color: #333333">=</span> df<span style="color: #333333">.</span>copy()
            enhanced_df[<span style="background-color: #fff0f0">'processing_timestamp'</span>] <span style="color: #333333">=</span> pd<span style="color: #333333">.</span>Timestamp<span style="color: #333333">.</span>now()
            enhanced_df[<span style="background-color: #fff0f0">'smarttable_processed'</span>] <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">True</span>

            <span style="color: #888888"># Save enhanced data</span>
            output_path <span style="color: #333333">=</span> resource_paths<span style="color: #333333">.</span>struct <span style="color: #333333">/</span> <span style="background-color: #fff0f0">f"enhanced_</span><span style="background-color: #eeeeee">{</span>raw_file<span style="color: #333333">.</span>name<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>
            enhanced_df<span style="color: #333333">.</span>to_csv(output_path, index<span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">False</span>)

<span style="color: #888888"># Execute SmartTable processing</span>
smarttable_file <span style="color: #333333">=</span> Path(<span style="background-color: #fff0f0">"data/inputdata/smarttable_metadata.xlsx"</span>)
status <span style="color: #333333">=</span> smarttable_invoice_mode_process(
    index<span style="color: #333333">=</span><span style="background-color: #fff0f0">"001"</span>,
    srcpaths<span style="color: #333333">=</span>srcpaths,
    resource_paths<span style="color: #333333">=</span>resource_paths,
    smarttable_file<span style="color: #333333">=</span>smarttable_file,
    datasets_process_function<span style="color: #333333">=</span>smarttable_processor
)

<span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"SmartTable processing status: </span><span style="background-color: #eeeeee">{</span>status<span style="color: #333333">.</span>status<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)
</code></pre></div></td></tr></table></div>
<h3 id="rdeformat_mode_process">rdeformat_mode_process</h3>
<p>Process data using RDE format specifications with advanced structure handling.</p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">6</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">rdeformat_mode_process</span>(
    index: <span style="color: #007020">str</span>,
    srcpaths: RdeInputDirPaths,
    resource_paths: RdeOutputResourcePath,
    datasets_process_function: _CallbackType <span style="color: #333333">|</span> <span style="color: #008800; font-weight: bold">None</span> <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">None</span>,
) <span style="color: #333333">-&gt;</span> WorkflowExecutionStatus
</code></pre></div></td></tr></table></div>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>index</code> (str): Unique workflow execution identifier</li>
<li><code>srcpaths</code> (RdeInputDirPaths): Input directory paths</li>
<li><code>resource_paths</code> (RdeOutputResourcePath): Output resource paths</li>
<li><code>datasets_process_function</code> (_CallbackType | None): Optional custom processing function</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>WorkflowExecutionStatus</code>: Execution status for RDE format processing</li>
</ul>
<p><strong>Processing Steps:</strong></p>
<ol>
<li>Overwrite invoice file with RDE format specifications</li>
<li>Copy input files to raw file directory using RDE format rules</li>
<li>Execute custom dataset processing function (if provided)</li>
<li>Copy images to thumbnail directory</li>
<li>Update descriptions with features (errors ignored)</li>
<li>Validate metadata-def.json file</li>
<li>Validate invoice file against schema</li>
</ol>
<p><strong>RDE Format Features:</strong></p>
<ul>
<li>Structured directory organization</li>
<li>Predefined metadata schemas</li>
<li>Standardized file naming conventions</li>
<li>Automated validation pipelines</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 7</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 8</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 9</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">10</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">11</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">12</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">13</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">14</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">15</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">16</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">17</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">18</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">19</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">20</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">21</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">22</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">23</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">24</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">25</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">26</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">27</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">28</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">29</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">30</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">31</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">32</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">33</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">34</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">35</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">36</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">37</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">38</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">39</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">40</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">41</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">42</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">43</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">44</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">45</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit.modeproc</span> <span style="color: #008800; font-weight: bold">import</span> rdeformat_mode_process
<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">pathlib</span> <span style="color: #008800; font-weight: bold">import</span> Path
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">json</span>

<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">rdeformat_processor</span>(srcpaths: RdeInputDirPaths, resource_paths: RdeOutputResourcePath) <span style="color: #333333">-&gt;</span> <span style="color: #008800; font-weight: bold">None</span>:
<span style="color: #bbbbbb">    </span><span style="color: #DD4422">"""Custom processing for RDE format data."""</span>

    <span style="color: #888888"># RDE format provides structured processing</span>
    rde_metadata <span style="color: #333333">=</span> {
        <span style="background-color: #fff0f0">"format_version"</span>: <span style="background-color: #fff0f0">"2.0"</span>,
        <span style="background-color: #fff0f0">"processing_mode"</span>: <span style="background-color: #fff0f0">"rdeformat"</span>,
        <span style="background-color: #fff0f0">"files_processed"</span>: []
    }

    <span style="color: #008800; font-weight: bold">for</span> raw_file <span style="color: #000000; font-weight: bold">in</span> resource_paths<span style="color: #333333">.</span>rawfiles:
        <span style="color: #888888"># Process according to RDE format specifications</span>
        <span style="color: #008800; font-weight: bold">if</span> <span style="background-color: #fff0f0">'structured'</span> <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">str</span>(raw_file):
            <span style="color: #888888"># Handle structured data files</span>
            structured_output <span style="color: #333333">=</span> resource_paths<span style="color: #333333">.</span>struct <span style="color: #333333">/</span> raw_file<span style="color: #333333">.</span>name
            <span style="color: #888888"># Copy and validate structured data</span>
            <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">shutil</span>
            shutil<span style="color: #333333">.</span>copy2(raw_file, structured_output)

        <span style="color: #008800; font-weight: bold">elif</span> <span style="background-color: #fff0f0">'meta'</span> <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">str</span>(raw_file):
            <span style="color: #888888"># Handle metadata files</span>
            meta_output <span style="color: #333333">=</span> resource_paths<span style="color: #333333">.</span>meta <span style="color: #333333">/</span> raw_file<span style="color: #333333">.</span>name
            shutil<span style="color: #333333">.</span>copy2(raw_file, meta_output)

        rde_metadata[<span style="background-color: #fff0f0">"files_processed"</span>]<span style="color: #333333">.</span>append({
            <span style="background-color: #fff0f0">"source"</span>: <span style="color: #007020">str</span>(raw_file),
            <span style="background-color: #fff0f0">"type"</span>: <span style="background-color: #fff0f0">"structured"</span> <span style="color: #008800; font-weight: bold">if</span> <span style="background-color: #fff0f0">'structured'</span> <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">str</span>(raw_file) <span style="color: #008800; font-weight: bold">else</span> <span style="background-color: #fff0f0">"data"</span>
        })

    <span style="color: #888888"># Save RDE processing metadata</span>
    metadata_path <span style="color: #333333">=</span> resource_paths<span style="color: #333333">.</span>meta <span style="color: #333333">/</span> <span style="background-color: #fff0f0">"rde_processing_metadata.json"</span>
    <span style="color: #008800; font-weight: bold">with</span> <span style="color: #007020">open</span>(metadata_path, <span style="background-color: #fff0f0">'w'</span>) <span style="color: #008800; font-weight: bold">as</span> f:
        json<span style="color: #333333">.</span>dump(rde_metadata, f, indent<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">2</span>)

<span style="color: #888888"># Execute RDE format processing</span>
status <span style="color: #333333">=</span> rdeformat_mode_process(
    index<span style="color: #333333">=</span><span style="background-color: #fff0f0">"001"</span>,
    srcpaths<span style="color: #333333">=</span>srcpaths,
    resource_paths<span style="color: #333333">=</span>resource_paths,
    datasets_process_function<span style="color: #333333">=</span>rdeformat_processor
)
</code></pre></div></td></tr></table></div>
<h3 id="multifile_mode_process">multifile_mode_process</h3>
<p>Process multiple source files simultaneously with parallel processing capabilities.</p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">6</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">multifile_mode_process</span>(
    index: <span style="color: #007020">str</span>,
    srcpaths: RdeInputDirPaths,
    resource_paths: RdeOutputResourcePath,
    datasets_process_function: _CallbackType <span style="color: #333333">|</span> <span style="color: #008800; font-weight: bold">None</span> <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">None</span>,
) <span style="color: #333333">-&gt;</span> WorkflowExecutionStatus
</code></pre></div></td></tr></table></div>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>index</code> (str): Unique workflow execution identifier</li>
<li><code>srcpaths</code> (RdeInputDirPaths): Input directory paths</li>
<li><code>resource_paths</code> (RdeOutputResourcePath): Output resource paths</li>
<li><code>datasets_process_function</code> (_CallbackType | None): Optional custom processing function</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>WorkflowExecutionStatus</code>: Execution status for multi-file processing</li>
</ul>
<p><strong>Processing Steps:</strong></p>
<ol>
<li>Overwrite invoice file for multi-file context</li>
<li>Copy all input files to raw file directory</li>
<li>Execute custom dataset processing function (if provided)</li>
<li>Replace filename placeholders for all files</li>
<li>Copy images to thumbnail directory</li>
<li>Update descriptions with features (errors ignored)</li>
<li>Validate metadata-def.json file</li>
<li>Validate invoice file against schema</li>
</ol>
<p><strong>Multi-File Features:</strong></p>
<ul>
<li>Parallel processing of multiple files</li>
<li>Batch operations on file groups</li>
<li>Coordinated metadata generation</li>
<li>Error tolerance configuration</li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 7</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 8</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 9</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">10</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">11</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">12</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">13</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">14</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">15</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">16</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">17</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">18</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">19</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">20</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">21</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">22</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">23</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">24</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">25</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">26</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">27</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">28</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">29</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">30</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">31</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">32</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">33</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">34</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">35</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">36</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">37</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">38</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">39</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">40</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">41</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">42</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">43</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">44</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">45</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">46</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">47</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">48</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">49</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">50</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">51</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">52</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">53</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">54</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">55</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">56</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">57</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">58</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">59</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">60</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">61</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">62</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">63</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">64</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">65</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">66</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">67</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">68</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">69</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">70</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">71</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">72</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">73</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">74</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">75</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">76</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">77</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">78</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">79</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">80</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">81</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">82</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit.modeproc</span> <span style="color: #008800; font-weight: bold">import</span> multifile_mode_process
<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">pathlib</span> <span style="color: #008800; font-weight: bold">import</span> Path
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">concurrent.futures</span>
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">pandas</span> <span style="color: #008800; font-weight: bold">as</span> <span style="color: #0e84b5; font-weight: bold">pd</span>

<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">multifile_processor</span>(srcpaths: RdeInputDirPaths, resource_paths: RdeOutputResourcePath) <span style="color: #333333">-&gt;</span> <span style="color: #008800; font-weight: bold">None</span>:
<span style="color: #bbbbbb">    </span><span style="color: #DD4422">"""Custom processing for multiple files."""</span>

    <span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">process_single_file</span>(raw_file: Path) <span style="color: #333333">-&gt;</span> <span style="color: #007020">dict</span>:
<span style="color: #bbbbbb">        </span><span style="color: #DD4422">"""Process a single file and return metadata."""</span>
        file_info <span style="color: #333333">=</span> {
            <span style="background-color: #fff0f0">"filename"</span>: raw_file<span style="color: #333333">.</span>name,
            <span style="background-color: #fff0f0">"size"</span>: raw_file<span style="color: #333333">.</span>stat()<span style="color: #333333">.</span>st_size,
            <span style="background-color: #fff0f0">"type"</span>: raw_file<span style="color: #333333">.</span>suffix,
            <span style="background-color: #fff0f0">"processed"</span>: <span style="color: #008800; font-weight: bold">False</span>
        }

        <span style="color: #008800; font-weight: bold">try</span>:
            <span style="color: #008800; font-weight: bold">if</span> raw_file<span style="color: #333333">.</span>suffix <span style="color: #333333">==</span> <span style="background-color: #fff0f0">'.csv'</span>:
                <span style="color: #888888"># Process CSV files</span>
                df <span style="color: #333333">=</span> pd<span style="color: #333333">.</span>read_csv(raw_file)
                processed_path <span style="color: #333333">=</span> resource_paths<span style="color: #333333">.</span>struct <span style="color: #333333">/</span> <span style="background-color: #fff0f0">f"processed_</span><span style="background-color: #eeeeee">{</span>raw_file<span style="color: #333333">.</span>name<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>

                <span style="color: #888888"># Add processing metadata to DataFrame</span>
                df[<span style="background-color: #fff0f0">'file_source'</span>] <span style="color: #333333">=</span> raw_file<span style="color: #333333">.</span>name
                df[<span style="background-color: #fff0f0">'processing_index'</span>] <span style="color: #333333">=</span> resource_paths<span style="color: #333333">.</span>rawfiles<span style="color: #333333">.</span>index(raw_file)

                df<span style="color: #333333">.</span>to_csv(processed_path, index<span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">False</span>)
                file_info[<span style="background-color: #fff0f0">"processed"</span>] <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">True</span>
                file_info[<span style="background-color: #fff0f0">"rows"</span>] <span style="color: #333333">=</span> <span style="color: #007020">len</span>(df)

            <span style="color: #008800; font-weight: bold">elif</span> raw_file<span style="color: #333333">.</span>suffix <span style="color: #000000; font-weight: bold">in</span> [<span style="background-color: #fff0f0">'.txt'</span>, <span style="background-color: #fff0f0">'.log'</span>]:
                <span style="color: #888888"># Process text files</span>
                content <span style="color: #333333">=</span> raw_file<span style="color: #333333">.</span>read_text(encoding<span style="color: #333333">=</span><span style="background-color: #fff0f0">'utf-8'</span>)
                processed_path <span style="color: #333333">=</span> resource_paths<span style="color: #333333">.</span>struct <span style="color: #333333">/</span> <span style="background-color: #fff0f0">f"processed_</span><span style="background-color: #eeeeee">{</span>raw_file<span style="color: #333333">.</span>name<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>

                <span style="color: #888888"># Add processing header</span>
                processed_content <span style="color: #333333">=</span> <span style="background-color: #fff0f0">f"# Processed from </span><span style="background-color: #eeeeee">{</span>raw_file<span style="color: #333333">.</span>name<span style="background-color: #eeeeee">}</span><span style="color: #666666; font-weight: bold; background-color: #fff0f0">\n</span><span style="background-color: #eeeeee">{</span>content<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>
                processed_path<span style="color: #333333">.</span>write_text(processed_content, encoding<span style="color: #333333">=</span><span style="background-color: #fff0f0">'utf-8'</span>)

                file_info[<span style="background-color: #fff0f0">"processed"</span>] <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">True</span>
                file_info[<span style="background-color: #fff0f0">"lines"</span>] <span style="color: #333333">=</span> <span style="color: #007020">len</span>(content<span style="color: #333333">.</span>splitlines())

        <span style="color: #008800; font-weight: bold">except</span> <span style="color: #FF0000; font-weight: bold">Exception</span> <span style="color: #008800; font-weight: bold">as</span> e:
            file_info[<span style="background-color: #fff0f0">"error"</span>] <span style="color: #333333">=</span> <span style="color: #007020">str</span>(e)

        <span style="color: #008800; font-weight: bold">return</span> file_info

    <span style="color: #888888"># Process files in parallel</span>
    <span style="color: #008800; font-weight: bold">with</span> concurrent<span style="color: #333333">.</span>futures<span style="color: #333333">.</span>ThreadPoolExecutor(max_workers<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">4</span>) <span style="color: #008800; font-weight: bold">as</span> executor:
        future_to_file <span style="color: #333333">=</span> {
            executor<span style="color: #333333">.</span>submit(process_single_file, raw_file): raw_file
            <span style="color: #008800; font-weight: bold">for</span> raw_file <span style="color: #000000; font-weight: bold">in</span> resource_paths<span style="color: #333333">.</span>rawfiles
        }

        results <span style="color: #333333">=</span> []
        <span style="color: #008800; font-weight: bold">for</span> future <span style="color: #000000; font-weight: bold">in</span> concurrent<span style="color: #333333">.</span>futures<span style="color: #333333">.</span>as_completed(future_to_file):
            file_result <span style="color: #333333">=</span> future<span style="color: #333333">.</span>result()
            results<span style="color: #333333">.</span>append(file_result)

    <span style="color: #888888"># Save batch processing results</span>
    batch_metadata <span style="color: #333333">=</span> {
        <span style="background-color: #fff0f0">"total_files"</span>: <span style="color: #007020">len</span>(resource_paths<span style="color: #333333">.</span>rawfiles),
        <span style="background-color: #fff0f0">"processed_files"</span>: <span style="color: #007020">sum</span>(<span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #008800; font-weight: bold">for</span> r <span style="color: #000000; font-weight: bold">in</span> results <span style="color: #008800; font-weight: bold">if</span> r<span style="color: #333333">.</span>get(<span style="background-color: #fff0f0">"processed"</span>, <span style="color: #008800; font-weight: bold">False</span>)),
        <span style="background-color: #fff0f0">"failed_files"</span>: <span style="color: #007020">sum</span>(<span style="color: #0000DD; font-weight: bold">1</span> <span style="color: #008800; font-weight: bold">for</span> r <span style="color: #000000; font-weight: bold">in</span> results <span style="color: #008800; font-weight: bold">if</span> <span style="background-color: #fff0f0">"error"</span> <span style="color: #000000; font-weight: bold">in</span> r),
        <span style="background-color: #fff0f0">"file_details"</span>: results
    }

    metadata_path <span style="color: #333333">=</span> resource_paths<span style="color: #333333">.</span>meta <span style="color: #333333">/</span> <span style="background-color: #fff0f0">"multifile_batch_metadata.json"</span>
    <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">json</span>
    <span style="color: #008800; font-weight: bold">with</span> <span style="color: #007020">open</span>(metadata_path, <span style="background-color: #fff0f0">'w'</span>) <span style="color: #008800; font-weight: bold">as</span> f:
        json<span style="color: #333333">.</span>dump(batch_metadata, f, indent<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">2</span>)

<span style="color: #888888"># Execute multi-file processing</span>
status <span style="color: #333333">=</span> multifile_mode_process(
    index<span style="color: #333333">=</span><span style="background-color: #fff0f0">"001"</span>,
    srcpaths<span style="color: #333333">=</span>srcpaths,
    resource_paths<span style="color: #333333">=</span>resource_paths,
    datasets_process_function<span style="color: #333333">=</span>multifile_processor
)

<span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Processed </span><span style="background-color: #eeeeee">{</span><span style="color: #007020">len</span>(resource_paths<span style="color: #333333">.</span>rawfiles)<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0"> files with status: </span><span style="background-color: #eeeeee">{</span>status<span style="color: #333333">.</span>status<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)
</code></pre></div></td></tr></table></div>
<h3 id="copy_input_to_rawfile">copy_input_to_rawfile</h3>
<p>Copy input raw files to a specified directory.</p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">copy_input_to_rawfile</span>(raw_dir_path: Path, raw_files: <span style="color: #007020">tuple</span>[Path, <span style="color: #333333">...</span>]) <span style="color: #333333">-&gt;</span> <span style="color: #008800; font-weight: bold">None</span>
</code></pre></div></td></tr></table></div>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>raw_dir_path</code> (Path): Target directory for copying raw files</li>
<li><code>raw_files</code> (tuple[Path, ...]): Tuple of source file paths to copy</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>None</code></li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 7</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 8</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 9</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">10</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">11</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">12</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">13</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">14</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">15</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">16</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">17</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">18</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">19</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">20</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit.modeproc</span> <span style="color: #008800; font-weight: bold">import</span> copy_input_to_rawfile
<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">pathlib</span> <span style="color: #008800; font-weight: bold">import</span> Path

<span style="color: #888888"># Setup source files and target directory</span>
raw_files <span style="color: #333333">=</span> (
    Path(<span style="background-color: #fff0f0">"data/input/file1.csv"</span>),
    Path(<span style="background-color: #fff0f0">"data/input/file2.txt"</span>),
    Path(<span style="background-color: #fff0f0">"data/input/file3.json"</span>)
)

target_dir <span style="color: #333333">=</span> Path(<span style="background-color: #fff0f0">"data/raw"</span>)
target_dir<span style="color: #333333">.</span>mkdir(parents<span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">True</span>, exist_ok<span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">True</span>)

<span style="color: #888888"># Copy files to raw directory</span>
copy_input_to_rawfile(target_dir, raw_files)

<span style="color: #888888"># Verify files were copied</span>
<span style="color: #008800; font-weight: bold">for</span> file <span style="color: #000000; font-weight: bold">in</span> raw_files:
    copied_file <span style="color: #333333">=</span> target_dir <span style="color: #333333">/</span> file<span style="color: #333333">.</span>name
    <span style="color: #008800; font-weight: bold">assert</span> copied_file<span style="color: #333333">.</span>exists(), <span style="background-color: #fff0f0">f"File </span><span style="background-color: #eeeeee">{</span>file<span style="color: #333333">.</span>name<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0"> not copied"</span>
</code></pre></div></td></tr></table></div>
<h3 id="copy_input_to_rawfile_for_rdeformat">copy_input_to_rawfile_for_rdeformat</h3>
<p>Copy input files to appropriate directories based on RDE format directory structure.</p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">copy_input_to_rawfile_for_rdeformat</span>(resource_paths: RdeOutputResourcePath) <span style="color: #333333">-&gt;</span> <span style="color: #008800; font-weight: bold">None</span>
</code></pre></div></td></tr></table></div>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>resource_paths</code> (RdeOutputResourcePath): Resource paths containing source files and target directories</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>None</code></li>
</ul>
<p><strong>Directory Mapping:</strong></p>
<ul>
<li><code>raw</code> → <code>resource_paths.raw</code></li>
<li><code>main_image</code> → <code>resource_paths.main_image</code></li>
<li><code>other_image</code> → <code>resource_paths.other_image</code></li>
<li><code>meta</code> → <code>resource_paths.meta</code></li>
<li><code>structured</code> → <code>resource_paths.struct</code></li>
<li><code>logs</code> → <code>resource_paths.logs</code></li>
<li><code>nonshared_raw</code> → <code>resource_paths.nonshared_raw</code></li>
</ul>
<p><strong>Example:</strong></p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 7</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 8</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 9</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">10</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">11</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">12</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">13</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">14</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">15</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">16</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">17</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">18</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">19</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">20</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">21</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">22</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">23</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">24</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">25</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">26</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">27</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">28</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">29</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit.modeproc</span> <span style="color: #008800; font-weight: bold">import</span> copy_input_to_rawfile_for_rdeformat
<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit.models.rde2types</span> <span style="color: #008800; font-weight: bold">import</span> RdeOutputResourcePath
<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">pathlib</span> <span style="color: #008800; font-weight: bold">import</span> Path

<span style="color: #888888"># Setup resource paths with RDE format structure</span>
resource_paths <span style="color: #333333">=</span> RdeOutputResourcePath(
    raw<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/raw"</span>),
    rawfiles<span style="color: #333333">=</span>(
        Path(<span style="background-color: #fff0f0">"data/temp/raw/data.csv"</span>),
        Path(<span style="background-color: #fff0f0">"data/temp/main_image/image.jpg"</span>),
        Path(<span style="background-color: #fff0f0">"data/temp/meta/metadata.json"</span>),
        Path(<span style="background-color: #fff0f0">"data/temp/structured/analysis.txt"</span>)
    ),
    struct<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/structured"</span>),
    main_image<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/main_image"</span>),
    other_image<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/other_image"</span>),
    meta<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/meta"</span>),
    logs<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/logs"</span>),
    <span style="color: #888888"># ... other paths</span>
)

<span style="color: #888888"># Create target directories</span>
<span style="color: #008800; font-weight: bold">for</span> attr_name <span style="color: #000000; font-weight: bold">in</span> [<span style="background-color: #fff0f0">'raw'</span>, <span style="background-color: #fff0f0">'struct'</span>, <span style="background-color: #fff0f0">'main_image'</span>, <span style="background-color: #fff0f0">'other_image'</span>, <span style="background-color: #fff0f0">'meta'</span>, <span style="background-color: #fff0f0">'logs'</span>, <span style="background-color: #fff0f0">'nonshared_raw'</span>]:
    <span style="color: #007020">getattr</span>(resource_paths, attr_name)<span style="color: #333333">.</span>mkdir(parents<span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">True</span>, exist_ok<span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">True</span>)

<span style="color: #888888"># Copy files according to RDE format rules</span>
copy_input_to_rawfile_for_rdeformat(resource_paths)

<span style="color: #888888"># Files are automatically placed in correct directories based on their path structure</span>
</code></pre></div></td></tr></table></div>
<h3 id="selected_input_checker">selected_input_checker</h3>
<p>Determine and return the appropriate input file checker based on file patterns and mode settings.</p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">selected_input_checker</span>(src_paths: RdeInputDirPaths, unpacked_dir_path: Path, mode: <span style="color: #007020">str</span> <span style="color: #333333">|</span> <span style="color: #008800; font-weight: bold">None</span>) <span style="color: #333333">-&gt;</span> IInputFileChecker
</code></pre></div></td></tr></table></div>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>src_paths</code> (RdeInputDirPaths): Source input file paths</li>
<li><code>unpacked_dir_path</code> (Path): Directory path for unpacked files</li>
<li><code>mode</code> (str | None): Processing mode specification</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li><code>IInputFileChecker</code>: Appropriate checker instance for the detected file type</li>
</ul>
<p><strong>Checker Selection Logic:</strong></p>
<ol>
<li><strong>SmartTableChecker</strong>: If files starting with <code>smarttable_</code> and extensions <code>.xlsx</code>, <code>.csv</code>, <code>.tsv</code> are found</li>
<li><strong>ExcelInvoiceChecker</strong>: If Excel files ending with <code>_excel_invoice</code> are found</li>
<li><strong>RDEFormatChecker</strong>: If mode is <code>"rdeformat"</code></li>
<li><strong>MultiFileChecker</strong>: If mode is <code>"multidatatile"</code></li>
<li><strong>InvoiceChecker</strong>: Default fallback for standard invoice processing</li>
</ol>
<p><strong>Example:</strong></p>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 7</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 8</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 9</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">10</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">11</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">12</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">13</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">14</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">15</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">16</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">17</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">18</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">19</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">20</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">21</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">22</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">23</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">24</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">25</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">26</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">27</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">28</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">29</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">30</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">31</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">32</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">33</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">34</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">35</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">36</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit.modeproc</span> <span style="color: #008800; font-weight: bold">import</span> selected_input_checker
<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit.models.rde2types</span> <span style="color: #008800; font-weight: bold">import</span> RdeInputDirPaths
<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">pathlib</span> <span style="color: #008800; font-weight: bold">import</span> Path

<span style="color: #888888"># Setup input paths</span>
src_paths <span style="color: #333333">=</span> RdeInputDirPaths(
    inputdata<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/inputdata"</span>),
    invoice<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/invoice"</span>),
    tasksupport<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/tasksupport"</span>)
)

unpacked_dir <span style="color: #333333">=</span> Path(<span style="background-color: #fff0f0">"data/temp"</span>)

<span style="color: #888888"># Test different scenarios</span>

<span style="color: #888888"># Scenario 1: SmartTable files detected</span>
<span style="color: #888888"># Files: smarttable_metadata.xlsx, data.csv</span>
checker <span style="color: #333333">=</span> selected_input_checker(src_paths, unpacked_dir, <span style="color: #008800; font-weight: bold">None</span>)
<span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Checker type: </span><span style="background-color: #eeeeee">{</span>checker<span style="color: #333333">.</span>checker_type<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)  <span style="color: #888888"># "smarttable"</span>

<span style="color: #888888"># Scenario 2: Excel invoice files detected</span>
<span style="color: #888888"># Files: dataset_excel_invoice.xlsx, data.zip</span>
checker <span style="color: #333333">=</span> selected_input_checker(src_paths, unpacked_dir, <span style="color: #008800; font-weight: bold">None</span>)
<span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Checker type: </span><span style="background-color: #eeeeee">{</span>checker<span style="color: #333333">.</span>checker_type<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)  <span style="color: #888888"># "excel_invoice"</span>

<span style="color: #888888"># Scenario 3: RDE format mode</span>
checker <span style="color: #333333">=</span> selected_input_checker(src_paths, unpacked_dir, <span style="background-color: #fff0f0">"rdeformat"</span>)
<span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Checker type: </span><span style="background-color: #eeeeee">{</span>checker<span style="color: #333333">.</span>checker_type<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)  <span style="color: #888888"># "rdeformat"</span>

<span style="color: #888888"># Scenario 4: Multi-file mode</span>
checker <span style="color: #333333">=</span> selected_input_checker(src_paths, unpacked_dir, <span style="background-color: #fff0f0">"multidatatile"</span>)
<span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Checker type: </span><span style="background-color: #eeeeee">{</span>checker<span style="color: #333333">.</span>checker_type<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)  <span style="color: #888888"># "multifile"</span>

<span style="color: #888888"># Scenario 5: Default invoice mode</span>
checker <span style="color: #333333">=</span> selected_input_checker(src_paths, unpacked_dir, <span style="color: #008800; font-weight: bold">None</span>)
<span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Checker type: </span><span style="background-color: #eeeeee">{</span>checker<span style="color: #333333">.</span>checker_type<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)  <span style="color: #888888"># "invoice"</span>
</code></pre></div></td></tr></table></div>
<h2 id="workflowexecutionstatus">WorkflowExecutionStatus</h2>
<p>All processing functions return a <code>WorkflowExecutionStatus</code> object containing:</p>
<h3 id="attributes">Attributes</h3>
<ul>
<li><code>run_id</code> (str): Unique identifier for workflow execution (zero-padded to 4 digits)</li>
<li><code>title</code> (str): Descriptive title for the workflow execution</li>
<li><code>status</code> (str): Execution status (<code>"success"</code> or <code>"failed"</code>)</li>
<li><code>mode</code> (str): Processing mode used (e.g., <code>"invoice"</code>, <code>"rdeformat"</code>, <code>"Excelinvoice"</code>)</li>
<li><code>error_code</code> (int | None): Error code if execution failed</li>
<li><code>error_message</code> (str | None): Error message if execution failed</li>
<li><code>stacktrace</code> (str | None): Stack trace for debugging if execution failed</li>
<li><code>target</code> (str): Target directory or file path related to execution</li>
</ul>
<h3 id="example-status-handling">Example Status Handling</h3>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 7</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 8</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 9</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">10</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">11</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">12</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">13</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">14</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">15</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">16</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">17</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit.modeproc</span> <span style="color: #008800; font-weight: bold">import</span> invoice_mode_process

status <span style="color: #333333">=</span> invoice_mode_process(
    index<span style="color: #333333">=</span><span style="background-color: #fff0f0">"001"</span>,
    srcpaths<span style="color: #333333">=</span>srcpaths,
    resource_paths<span style="color: #333333">=</span>resource_paths
)

<span style="color: #008800; font-weight: bold">if</span> status<span style="color: #333333">.</span>status <span style="color: #333333">==</span> <span style="background-color: #fff0f0">"success"</span>:
    <span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Processing completed successfully"</span>)
    <span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Mode: </span><span style="background-color: #eeeeee">{</span>status<span style="color: #333333">.</span>mode<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)
    <span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Target: </span><span style="background-color: #eeeeee">{</span>status<span style="color: #333333">.</span>target<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)
<span style="color: #008800; font-weight: bold">else</span>:
    <span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Processing failed: </span><span style="background-color: #eeeeee">{</span>status<span style="color: #333333">.</span>error_message<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)
    <span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Error code: </span><span style="background-color: #eeeeee">{</span>status<span style="color: #333333">.</span>error_code<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)
    <span style="color: #008800; font-weight: bold">if</span> status<span style="color: #333333">.</span>stacktrace:
        <span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Stack trace: </span><span style="background-color: #eeeeee">{</span>status<span style="color: #333333">.</span>stacktrace<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)
</code></pre></div></td></tr></table></div>
<h2 id="error-handling">Error Handling</h2>
<h3 id="exception-types">Exception Types</h3>
<ul>
<li><strong>StructuredError</strong>: Raised for structured processing failures</li>
<li><strong>Validation Errors</strong>: During metadata or invoice schema validation</li>
<li><strong>File Operation Errors</strong>: During file copying or directory operations</li>
<li><strong>Custom Function Errors</strong>: Propagated from user-defined processing functions</li>
</ul>
<h3 id="best-practices">Best Practices</h3>
<ol>
<li><strong>Handle Custom Function Errors</strong>:</li>
</ol>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">7</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">safe_processor</span>(srcpaths: RdeInputDirPaths, resource_paths: RdeOutputResourcePath) <span style="color: #333333">-&gt;</span> <span style="color: #008800; font-weight: bold">None</span>:
    <span style="color: #008800; font-weight: bold">try</span>:
        <span style="color: #888888"># Your processing logic</span>
        <span style="color: #008800; font-weight: bold">pass</span>
    <span style="color: #008800; font-weight: bold">except</span> <span style="color: #FF0000; font-weight: bold">Exception</span> <span style="color: #008800; font-weight: bold">as</span> e:
        logger<span style="color: #333333">.</span>error(<span style="background-color: #fff0f0">f"Custom processing failed: </span><span style="background-color: #eeeeee">{</span>e<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)
        <span style="color: #888888"># Don't re-raise to allow workflow to continue</span>
</code></pre></div></td></tr></table></div>
<ol>
<li><strong>Validate Inputs</strong>:</li>
</ol>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 7</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 8</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 9</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">10</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">validated_processor</span>(srcpaths: RdeInputDirPaths, resource_paths: RdeOutputResourcePath) <span style="color: #333333">-&gt;</span> <span style="color: #008800; font-weight: bold">None</span>:
    <span style="color: #008800; font-weight: bold">if</span> <span style="color: #000000; font-weight: bold">not</span> resource_paths<span style="color: #333333">.</span>rawfiles:
        <span style="color: #007020">print</span>(<span style="background-color: #fff0f0">"No files to process"</span>)
        <span style="color: #008800; font-weight: bold">return</span>

    <span style="color: #008800; font-weight: bold">for</span> raw_file <span style="color: #000000; font-weight: bold">in</span> resource_paths<span style="color: #333333">.</span>rawfiles:
        <span style="color: #008800; font-weight: bold">if</span> <span style="color: #000000; font-weight: bold">not</span> raw_file<span style="color: #333333">.</span>exists():
            <span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Warning: File not found: </span><span style="background-color: #eeeeee">{</span>raw_file<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)
            <span style="color: #008800; font-weight: bold">continue</span>
        <span style="color: #888888"># Process file...</span>
</code></pre></div></td></tr></table></div>
<ol>
<li><strong>Use Appropriate Error Tolerance</strong>:</li>
</ol>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">6</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #888888"># In workflows.run() configuration</span>
config <span style="color: #333333">=</span> Config(
    multidata_tile<span style="color: #333333">=</span>MultiDataTileSettings(
        ignore_errors<span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">True</span>  <span style="color: #888888"># Continue processing on individual failures</span>
    )
)
</code></pre></div></td></tr></table></div>
<h2 id="integration-examples">Integration Examples</h2>
<h3 id="complete-processing-workflow">Complete Processing Workflow</h3>
<div class="highlight" style="background: #ffffff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  1</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  2</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  3</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  4</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  5</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  6</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  7</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  8</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">  9</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 10</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 11</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 12</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 13</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 14</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 15</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 16</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 17</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 18</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 19</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 20</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 21</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 22</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 23</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 24</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 25</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 26</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 27</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 28</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 29</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 30</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 31</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 32</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 33</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 34</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 35</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 36</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 37</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 38</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 39</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 40</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 41</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 42</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 43</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 44</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 45</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 46</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 47</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 48</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 49</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 50</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 51</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 52</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 53</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 54</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 55</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 56</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 57</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 58</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 59</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 60</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 61</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 62</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 63</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 64</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 65</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 66</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 67</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 68</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 69</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 70</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 71</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 72</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 73</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 74</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 75</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 76</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 77</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 78</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 79</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 80</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 81</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 82</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 83</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 84</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 85</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 86</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 87</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 88</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 89</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 90</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 91</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 92</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 93</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 94</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 95</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 96</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 97</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 98</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;"> 99</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">100</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">101</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">102</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">103</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">104</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">105</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">106</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">107</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">108</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">109</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">110</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">111</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">112</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">113</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">114</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">115</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">116</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">117</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">118</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">119</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">120</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">121</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">122</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">123</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">124</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">125</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">126</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">127</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">128</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">129</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">130</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">131</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">132</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">133</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">134</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">135</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">136</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">137</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">138</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">139</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">140</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">141</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">142</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">143</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">144</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">145</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">146</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">147</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">148</span>
<span style="color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px;">149</span></pre></div></td><td class="code"><div><pre style="line-height: 125%;"><span></span><code><span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit.modeproc</span> <span style="color: #008800; font-weight: bold">import</span> selected_input_checker, invoice_mode_process
<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit.models.rde2types</span> <span style="color: #008800; font-weight: bold">import</span> RdeInputDirPaths, RdeOutputResourcePath
<span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">pathlib</span> <span style="color: #008800; font-weight: bold">import</span> Path
<span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">logging</span>

<span style="color: #888888"># Setup logging</span>
logging<span style="color: #333333">.</span>basicConfig(level<span style="color: #333333">=</span>logging<span style="color: #333333">.</span>INFO)
logger <span style="color: #333333">=</span> logging<span style="color: #333333">.</span>getLogger(<span style="color: #996633">__name__</span>)

<span style="color: #008800; font-weight: bold">def</span> <span style="color: #0066BB; font-weight: bold">comprehensive_processor</span>(srcpaths: RdeInputDirPaths, resource_paths: RdeOutputResourcePath) <span style="color: #333333">-&gt;</span> <span style="color: #008800; font-weight: bold">None</span>:
<span style="color: #bbbbbb">    </span><span style="color: #DD4422">"""Comprehensive data processing function."""</span>

    logger<span style="color: #333333">.</span>info(<span style="background-color: #fff0f0">f"Starting processing of </span><span style="background-color: #eeeeee">{</span><span style="color: #007020">len</span>(resource_paths<span style="color: #333333">.</span>rawfiles)<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0"> files"</span>)

    processing_summary <span style="color: #333333">=</span> {
        <span style="background-color: #fff0f0">"files_processed"</span>: <span style="color: #0000DD; font-weight: bold">0</span>,
        <span style="background-color: #fff0f0">"files_failed"</span>: <span style="color: #0000DD; font-weight: bold">0</span>,
        <span style="background-color: #fff0f0">"processing_details"</span>: []
    }

    <span style="color: #008800; font-weight: bold">for</span> raw_file <span style="color: #000000; font-weight: bold">in</span> resource_paths<span style="color: #333333">.</span>rawfiles:
        <span style="color: #008800; font-weight: bold">try</span>:
            file_detail <span style="color: #333333">=</span> {<span style="background-color: #fff0f0">"filename"</span>: raw_file<span style="color: #333333">.</span>name, <span style="background-color: #fff0f0">"status"</span>: <span style="background-color: #fff0f0">"processing"</span>}

            <span style="color: #008800; font-weight: bold">if</span> raw_file<span style="color: #333333">.</span>suffix <span style="color: #333333">==</span> <span style="background-color: #fff0f0">'.csv'</span>:
                <span style="color: #888888"># CSV processing</span>
                <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">pandas</span> <span style="color: #008800; font-weight: bold">as</span> <span style="color: #0e84b5; font-weight: bold">pd</span>
                df <span style="color: #333333">=</span> pd<span style="color: #333333">.</span>read_csv(raw_file)

                <span style="color: #888888"># Data validation</span>
                <span style="color: #008800; font-weight: bold">if</span> df<span style="color: #333333">.</span>empty:
                    <span style="color: #008800; font-weight: bold">raise</span> <span style="color: #FF0000; font-weight: bold">ValueError</span>(<span style="background-color: #fff0f0">"CSV file is empty"</span>)

                <span style="color: #888888"># Data transformation</span>
                df[<span style="background-color: #fff0f0">'processed_timestamp'</span>] <span style="color: #333333">=</span> pd<span style="color: #333333">.</span>Timestamp<span style="color: #333333">.</span>now()
                df[<span style="background-color: #fff0f0">'source_file'</span>] <span style="color: #333333">=</span> raw_file<span style="color: #333333">.</span>name

                <span style="color: #888888"># Save processed data</span>
                output_path <span style="color: #333333">=</span> resource_paths<span style="color: #333333">.</span>struct <span style="color: #333333">/</span> <span style="background-color: #fff0f0">f"enhanced_</span><span style="background-color: #eeeeee">{</span>raw_file<span style="color: #333333">.</span>name<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>
                df<span style="color: #333333">.</span>to_csv(output_path, index<span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">False</span>)

                file_detail<span style="color: #333333">.</span>update({
                    <span style="background-color: #fff0f0">"status"</span>: <span style="background-color: #fff0f0">"success"</span>,
                    <span style="background-color: #fff0f0">"rows_processed"</span>: <span style="color: #007020">len</span>(df),
                    <span style="background-color: #fff0f0">"output_file"</span>: <span style="color: #007020">str</span>(output_path)
                })
                processing_summary[<span style="background-color: #fff0f0">"files_processed"</span>] <span style="color: #333333">+=</span> <span style="color: #0000DD; font-weight: bold">1</span>

            <span style="color: #008800; font-weight: bold">elif</span> raw_file<span style="color: #333333">.</span>suffix <span style="color: #000000; font-weight: bold">in</span> [<span style="background-color: #fff0f0">'.txt'</span>, <span style="background-color: #fff0f0">'.log'</span>]:
                <span style="color: #888888"># Text file processing</span>
                content <span style="color: #333333">=</span> raw_file<span style="color: #333333">.</span>read_text(encoding<span style="color: #333333">=</span><span style="background-color: #fff0f0">'utf-8'</span>)

                <span style="color: #888888"># Text analysis</span>
                lines <span style="color: #333333">=</span> content<span style="color: #333333">.</span>splitlines()
                word_count <span style="color: #333333">=</span> <span style="color: #007020">len</span>(content<span style="color: #333333">.</span>split())

                <span style="color: #888888"># Enhanced content with metadata</span>
                enhanced_content <span style="color: #333333">=</span> <span style="background-color: #fff0f0">f"""# Processing Metadata</span>
<span style="background-color: #fff0f0"># Original file: </span><span style="background-color: #eeeeee">{</span>raw_file<span style="color: #333333">.</span>name<span style="background-color: #eeeeee">}</span>
<span style="background-color: #fff0f0"># Lines: </span><span style="background-color: #eeeeee">{</span><span style="color: #007020">len</span>(lines)<span style="background-color: #eeeeee">}</span>
<span style="background-color: #fff0f0"># Words: </span><span style="background-color: #eeeeee">{</span>word_count<span style="background-color: #eeeeee">}</span>
<span style="background-color: #fff0f0"># Processed: </span><span style="background-color: #eeeeee">{</span>pd<span style="color: #333333">.</span>Timestamp<span style="color: #333333">.</span>now()<span style="background-color: #eeeeee">}</span>

<span style="background-color: #eeeeee">{</span>content<span style="background-color: #eeeeee">}</span>
<span style="background-color: #fff0f0">"""</span>

                <span style="color: #888888"># Save enhanced content</span>
                output_path <span style="color: #333333">=</span> resource_paths<span style="color: #333333">.</span>struct <span style="color: #333333">/</span> <span style="background-color: #fff0f0">f"enhanced_</span><span style="background-color: #eeeeee">{</span>raw_file<span style="color: #333333">.</span>name<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>
                output_path<span style="color: #333333">.</span>write_text(enhanced_content, encoding<span style="color: #333333">=</span><span style="background-color: #fff0f0">'utf-8'</span>)

                file_detail<span style="color: #333333">.</span>update({
                    <span style="background-color: #fff0f0">"status"</span>: <span style="background-color: #fff0f0">"success"</span>,
                    <span style="background-color: #fff0f0">"lines_processed"</span>: <span style="color: #007020">len</span>(lines),
                    <span style="background-color: #fff0f0">"words"</span>: word_count,
                    <span style="background-color: #fff0f0">"output_file"</span>: <span style="color: #007020">str</span>(output_path)
                })
                processing_summary[<span style="background-color: #fff0f0">"files_processed"</span>] <span style="color: #333333">+=</span> <span style="color: #0000DD; font-weight: bold">1</span>

            <span style="color: #008800; font-weight: bold">else</span>:
                <span style="color: #888888"># Handle other file types</span>
                <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">shutil</span>
                output_path <span style="color: #333333">=</span> resource_paths<span style="color: #333333">.</span>struct <span style="color: #333333">/</span> raw_file<span style="color: #333333">.</span>name
                shutil<span style="color: #333333">.</span>copy2(raw_file, output_path)

                file_detail<span style="color: #333333">.</span>update({
                    <span style="background-color: #fff0f0">"status"</span>: <span style="background-color: #fff0f0">"copied"</span>,
                    <span style="background-color: #fff0f0">"output_file"</span>: <span style="color: #007020">str</span>(output_path)
                })
                processing_summary[<span style="background-color: #fff0f0">"files_processed"</span>] <span style="color: #333333">+=</span> <span style="color: #0000DD; font-weight: bold">1</span>

        <span style="color: #008800; font-weight: bold">except</span> <span style="color: #FF0000; font-weight: bold">Exception</span> <span style="color: #008800; font-weight: bold">as</span> e:
            logger<span style="color: #333333">.</span>error(<span style="background-color: #fff0f0">f"Failed to process </span><span style="background-color: #eeeeee">{</span>raw_file<span style="color: #333333">.</span>name<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">: </span><span style="background-color: #eeeeee">{</span>e<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>)
            file_detail<span style="color: #333333">.</span>update({
                <span style="background-color: #fff0f0">"status"</span>: <span style="background-color: #fff0f0">"failed"</span>,
                <span style="background-color: #fff0f0">"error"</span>: <span style="color: #007020">str</span>(e)
            })
            processing_summary[<span style="background-color: #fff0f0">"files_failed"</span>] <span style="color: #333333">+=</span> <span style="color: #0000DD; font-weight: bold">1</span>

        processing_summary[<span style="background-color: #fff0f0">"processing_details"</span>]<span style="color: #333333">.</span>append(file_detail)

    <span style="color: #888888"># Save processing summary</span>
    summary_path <span style="color: #333333">=</span> resource_paths<span style="color: #333333">.</span>meta <span style="color: #333333">/</span> <span style="background-color: #fff0f0">"processing_summary.json"</span>
    <span style="color: #008800; font-weight: bold">import</span> <span style="color: #0e84b5; font-weight: bold">json</span>
    <span style="color: #008800; font-weight: bold">with</span> <span style="color: #007020">open</span>(summary_path, <span style="background-color: #fff0f0">'w'</span>) <span style="color: #008800; font-weight: bold">as</span> f:
        json<span style="color: #333333">.</span>dump(processing_summary, f, indent<span style="color: #333333">=</span><span style="color: #0000DD; font-weight: bold">2</span>, default<span style="color: #333333">=</span><span style="color: #007020">str</span>)

    logger<span style="color: #333333">.</span>info(<span style="background-color: #fff0f0">f"Processing complete: </span><span style="background-color: #eeeeee">{</span>processing_summary[<span style="background-color: #fff0f0">'files_processed'</span>]<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0"> successful, </span><span style="background-color: #eeeeee">{</span>processing_summary[<span style="background-color: #fff0f0">'files_failed'</span>]<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0"> failed"</span>)

<span style="color: #888888"># Setup and execute processing</span>
srcpaths <span style="color: #333333">=</span> RdeInputDirPaths(
    inputdata<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/inputdata"</span>),
    invoice<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/invoice"</span>),
    tasksupport<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">"data/tasksupport"</span>)
)

<span style="color: #888888"># Automatically select appropriate checker</span>
checker <span style="color: #333333">=</span> selected_input_checker(srcpaths, Path(<span style="background-color: #fff0f0">"data/temp"</span>), <span style="color: #008800; font-weight: bold">None</span>)
raw_files, excel_file, smarttable_file <span style="color: #333333">=</span> checker<span style="color: #333333">.</span>parse(srcpaths<span style="color: #333333">.</span>inputdata)

<span style="color: #888888"># Execute processing based on detected type</span>
<span style="color: #008800; font-weight: bold">for</span> idx, raw_file_group <span style="color: #000000; font-weight: bold">in</span> <span style="color: #007020">enumerate</span>(raw_files):
    resource_paths <span style="color: #333333">=</span> RdeOutputResourcePath(
        raw<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">f"data/raw/</span><span style="background-color: #eeeeee">{</span>idx<span style="background-color: #eeeeee">:</span><span style="background-color: #fff0f0">04d</span><span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>),
        rawfiles<span style="color: #333333">=</span>raw_file_group,
        struct<span style="color: #333333">=</span>Path(<span style="background-color: #fff0f0">f"data/structured/</span><span style="background-color: #eeeeee">{</span>idx<span style="background-color: #eeeeee">:</span><span style="background-color: #fff0f0">04d</span><span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">"</span>),
        <span style="color: #888888"># ... setup other paths</span>
    )

    <span style="color: #888888"># Create directories</span>
    <span style="color: #008800; font-weight: bold">for</span> attr_name <span style="color: #000000; font-weight: bold">in</span> [<span style="background-color: #fff0f0">'raw'</span>, <span style="background-color: #fff0f0">'struct'</span>, <span style="background-color: #fff0f0">'meta'</span>, <span style="background-color: #fff0f0">'main_image'</span>, <span style="background-color: #fff0f0">'thumbnail'</span>]:
        <span style="color: #007020">getattr</span>(resource_paths, attr_name)<span style="color: #333333">.</span>mkdir(parents<span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">True</span>, exist_ok<span style="color: #333333">=</span><span style="color: #008800; font-weight: bold">True</span>)

    <span style="color: #888888"># Execute appropriate processing mode</span>
    <span style="color: #008800; font-weight: bold">if</span> smarttable_file:
        <span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit.modeproc</span> <span style="color: #008800; font-weight: bold">import</span> smarttable_invoice_mode_process
        status <span style="color: #333333">=</span> smarttable_invoice_mode_process(
            <span style="color: #007020">str</span>(idx), srcpaths, resource_paths, smarttable_file, comprehensive_processor
        )
    <span style="color: #008800; font-weight: bold">elif</span> excel_file:
        <span style="color: #008800; font-weight: bold">from</span> <span style="color: #0e84b5; font-weight: bold">rdetoolkit.modeproc</span> <span style="color: #008800; font-weight: bold">import</span> excel_invoice_mode_process
        status <span style="color: #333333">=</span> excel_invoice_mode_process(
            srcpaths, resource_paths, excel_file, idx, comprehensive_processor
        )
    <span style="color: #008800; font-weight: bold">else</span>:
        status <span style="color: #333333">=</span> invoice_mode_process(
            <span style="color: #007020">str</span>(idx), srcpaths, resource_paths, comprehensive_processor
        )

    <span style="color: #007020">print</span>(<span style="background-color: #fff0f0">f"Batch </span><span style="background-color: #eeeeee">{</span>idx<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">: </span><span style="background-color: #eeeeee">{</span>status<span style="color: #333333">.</span>status<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0"> (</span><span style="background-color: #eeeeee">{</span>status<span style="color: #333333">.</span>mode<span style="background-color: #eeeeee">}</span><span style="background-color: #fff0f0">)"</span>)
</code></pre></div></td></tr></table></div>
<h2 id="performance-considerations">Performance Considerations</h2>
<ul>
<li><strong>File I/O Optimization</strong>: Use efficient file operations for large datasets</li>
<li><strong>Memory Management</strong>: Process files in chunks for large datasets</li>
<li><strong>Parallel Processing</strong>: Utilize multi-threading for independent file processing</li>
<li><strong>Error Recovery</strong>: Implement graceful error handling to continue processing other files</li>
<li><strong>Progress Tracking</strong>: Provide feedback for long-running operations</li>
</ul>
<h2 id="see-also">See Also</h2>
<ul>
<li><a href="../workflows.md">Workflows Module</a> - For orchestrating mode processing</li>
<li><a href="../core.md">Core Module</a> - For directory management and file operations</li>
<li><a href="../config.md">Configuration Guide</a> - For configuring processing behavior</li>
<li><a href="../input_controllers.md">Input Controllers</a> - For file type detection and validation</li>
</ul>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://github.com/nims-dpfc/rdetoolkit" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<div class="md-consent" data-md-component="consent" hidden="" id="__consent">
<div class="md-consent__overlay"></div>
<aside class="md-consent__inner">
<form class="md-consent__form md-grid md-typeset" name="consent">
<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" id="__settings" type="checkbox"/>
<div class="md-consent__settings">
<ul class="task-list">
<li class="task-list-item">
<label class="task-list-control">
<input checked="" name="github" type="checkbox"/>
<span class="task-list-indicator"></span>
          GitHub
        </label>
</li>
</ul>
</div>
<div class="md-consent__controls">
<button class="md-button md-button--primary">Accept</button>
<label class="md-button" for="__settings">Manage settings</label>
</div>
</form>
</aside>
</div>
<script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
<script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "navigation.tabs", "navigation.tabs.sticky"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
<script src="../../assets/javascripts/bundle.d6f25eb3.min.js"></script>
<script src="https://unpkg.com/mermaid@10.9.0/dist/mermaid.min.js"></script>
</body>
</html>