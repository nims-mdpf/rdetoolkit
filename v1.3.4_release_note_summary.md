# RDEToolKit v1.3.4 リリースノート概要

## 🚀 概要

RDEToolKit v1.3.4は、データ処理の信頼性向上、システムファイル処理の改善、SmartTable機能の強化に焦点を当てた大幅なアップデートです。自動ファイルクリーンアップ、エラーハンドリングの改善、スキーマベースの型変換など、多くの新機能と改善が含まれています。

## ✨ 主要な新機能

### 🧹 自動システムファイルクリーンアップ
- **NEW**: `SystemFilesCleaner`クラスによる自動ファイル除去機能
- ZIP展開時にmacOS（`.DS_Store`、`__MACOSX`）、Windows（`Thumbs.db`、`desktop.ini`）、開発系ファイル（`.git`、`__pycache__`、`.idea`）を自動削除
- データ処理ワークフローでの不要ファイル混入を防止

### 📊 SmartTable処理の強化  
- **IMPROVED**: CSVからinvoiceファイルへのマッピング機能向上
- **NEW**: SmartTableファイル名での`dataName`フィールド自動更新
- **NEW**: スキーマ情報を活用した型変換機能
- **NEW**: バリデーション付き早期終了処理機能
- エラーハンドリングとCSVパース処理の改善

### 🔧 スキーマ・型システムの改善
- **NEW**: `InvoiceSchemaJson`の`find_field()`メソッドによる動的フィールド検索
- **IMPROVED**: スキーマ定義を使用したカスタムフィールドの型変換サポート
- 必須フィールドのnullチェック機能強化
- 再帰検索によるスキーマフィールド解決の改善

## 🔧 技術的改善

### 🚨 エラーハンドリング・デバッグ機能
- **IMPROVED**: `StructuredError`例外のトレースバック管理改善
- **FIXED**: ワークフロー処理でのエラー伝播機能により、適切なエラーコードが`job.failed`に到達
- **IMPROVED**: `StructuredError`の適切な伝播によるパイプライン例外処理
- エラーログとデバッグ情報の強化

### ⚙️ 開発・CI改善
- **UPDATED**: PR AgentをCodium-aiからqodo-aiに移行
- **NEW**: 詳細なレビュー指示を含む包括的なPR Agent設定
- **IMPROVED**: より良いアクショントリガーを持つCIワークフロー設定
- セキュリティとパフォーマンスに焦点を当てたコードレビュー自動化の強化

### 🧪 テストカバレッジの拡張
- **NEW**: SmartTable処理の包括的統合テスト
- **NEW**: 様々なファイルタイプでのシステムファイルクリーンアップテスト
- **NEW**: 構造化エラー伝播のエラーハンドリングテスト  
- **NEW**: スキーマフィールド検索と型変換のテスト
- **IMPROVED**: より良いテスト分離のためのプロセッシングコンテキストフィクスチャ

## 🐛 バグ修正

- **FIXED**: ワークフロー処理でのエラーコード伝播
- **IMPROVED**: StructuredError例外のトレースバック処理
- **FIXED**: 適切なnullチェックによる必須フィールドバリデーション  
- **RESOLVED**: SmartTable処理でのCSVパースエラーハンドリング

## ⚙️ 設定更新

- **UPDATED**: PR AgentをCodium-aiからqodo-aiに更新
- **ADDED**: 包括的なPRレビュー設定
- **IMPROVED**: GitHub Actionsワークフロー設定

## 🔄 互換性

**破壊的変更なし**: このリリースは既存のワークフローと設定との完全な後方互換性を維持しています。

**移行不要**: 既存機能はすべて期待通りに動作し続けます。

## ✅ 検証済み

- ✅ 既存のテストはすべて合格
- ✅ 追加機能に対する新しい包括的テストスイート
- ✅ SmartTableワークフローの統合テスト
- ✅ システムファイルクリーンアップのバリデーションテスト
- ✅ エラーハンドリングと伝播のテスト

## 📝 技術詳細

このリリースは、RDEデータセット構築プログラムのワークフローサポートに重点を置き、特にZIPファイル展開時の自動クリーンアップ、SmartTableの型認識マッピング、および構造化エラー処理の改善により、安定性と信頼性を大幅に向上させています。

---

**フルチェンジログ**: https://github.com/nims-mdpf/rdetoolkit/compare/v1.3.3...v1.3.4